---
template:
  - light:
    - unique_id: all_lights_template
      turn_off:
      - target:
          entity_id: all
        action: light.turn_off
      turn_on:
      - target:
          entity_id: all
        action: light.turn_on
      default_entity_id: light.all_lights
      name: All Lights
      state: >
        {% if ((states.light|selectattr('state','eq','on')|map(attribute='entity_id'))|join(',')) == ''
            or ((states.light|selectattr('state','eq','on')|map(attribute='entity_id'))|join(',')) == 'light.all_lights' %}
        false
        {% else %}
        true
        {% endif %}
