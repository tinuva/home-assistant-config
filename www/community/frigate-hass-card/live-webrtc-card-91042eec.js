import{s as e,dt as t,cR as r,d9 as a,bc as s,bd as n,be as i,bg as c,d2 as o,l as d,cD as u,bQ as l,y as h}from"./card-f444d6e4.js";import{h as b,M as g}from"./media-e46d51bc.js";let m=class extends e{constructor(){super(...arguments),this._webrtcTask=new t(this,this._getWebRTCCardElement,(()=>[1]))}async play(){return this._getPlayer()?.play()}async pause(){this._getPlayer()?.pause()}async mute(){const e=this._getPlayer();e&&(e.muted=!0)}async unmute(){const e=this._getPlayer();e&&(e.muted=!1)}isMuted(){return this._getPlayer()?.muted??!0}async seek(e){const t=this._getPlayer();t&&(t.currentTime=e)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}_getPlayer(){const e=this.renderRoot?.querySelector("#webrtc");return e?.video??null}async _getWebRTCCardElement(){return await customElements.whenDefined("webrtc-camera"),customElements.get("webrtc-camera")}_createWebRTC(){const e=this._webrtcTask.value;if(e&&this.hass&&this.cameraConfig){const t=new e,r={...this.cameraConfig.webrtc_card};return r.url||r.entity||!this.cameraEndpoints?.webrtcCard||(r.url=this.cameraEndpoints.webrtcCard.endpoint),t.setConfig(r),t.hass=this.hass,t}return null}render(){return r(this,this._webrtcTask,(()=>{let e;try{e=this._createWebRTC()}catch(e){return u(this,e instanceof l?e.message:d("error.webrtc_card_reported_error")+": "+e.message,{context:e.context})}return e&&(e.id="webrtc"),h`${e}`}),{inProgressFunc:()=>o({message:d("error.webrtc_card_waiting"),cardWideConfig:this.cardWideConfig})})}updated(){this.updateComplete.then((()=>{const e=this._getPlayer();if(e){const t=e.onloadeddata;e.onloadeddata=r=>{t&&t.call(e,r),b(e,g),a(this,e)}}}))}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n/* Don't drop shadow or have radius for nested webrtc card */\n#webrtc ha-card {\n  border-radius: 0px;\n  margin: 0px;\n  box-shadow: none;\n}\n\nha-card,\ndiv.fix-safari,\n#video {\n  background: unset;\n  background-color: unset;\n}\n\n#webrtc #video {\n  object-fit: var(--frigate-card-media-layout-fit, contain);\n  object-position: var(--frigate-card-media-layout-position-x, 50%) var(--frigate-card-media-layout-position-y, 50%);\n}")}};n([i({attribute:!1})],m.prototype,"cameraConfig",void 0),n([i({attribute:!1})],m.prototype,"cameraEndpoints",void 0),n([i({attribute:!1})],m.prototype,"cardWideConfig",void 0),m=n([c("frigate-card-live-webrtc-card")],m);export{m as FrigateCardLiveWebRTCCard};
